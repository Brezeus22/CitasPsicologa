<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bienvenido a Emoción Vital</title>
  <link rel="stylesheet" href="nicepage.css">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="perfil.css">
  <!-- FontAwesome para los íconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
<header class="header-evital">
  <div class="logo-titulo">
    <img src="images/WhatsAppImage2025-05-18at6.16-Photoroom.png" alt="Logo Emoción Vital" class="logo-evital">
    <h1 class="verde">Bienvenido a Emoción Vital</h1>
  </div>
  <div class="menu-logout">
    <nav class="menu">
      <button class="btn-menu" id="menu-toggle"><i class="fa-solid fa-bars"></i> Menú</button>
      <ul class="menu-desplegable" id="menu-list">
        <li><a href="#" id="menu-perfil">Inicio</a></li>
        <li><a href="#" id="menu-cita">Crear Cita</a></li>
        <li><a href="#" id="menu-informe">Informe Médico</a></li>
        <li><a href="#" id="menu-historial">Historial Médico</a></li>
        <li><a href="#" id="menu-mis-citas">Mis citas</a></li>
      </ul>
    </nav>
    <!-- Nuevo icono de usuario con menú desplegable -->
    <div class="user-dropdown" id="user-dropdown">
      <button class="user-icon-btn" id="user-icon-btn" title="Usuario">
        <i class="fa-solid fa-user"></i>
      </button>
      <ul class="user-dropdown-menu" id="user-dropdown-menu">
        <li><a href="#" id="editar-perfil">Editar perfil</a></li>
        <li><a href="logout.html" id="cerrar-sesion">Cerrar sesión</a></li>
      </ul>
    </div>
    
  </div>
</header>

  <!-- Botones principales -->
  <div class="principal-botones" id="principal-botones">
    <a class="boton-principal" id="btn-cita" href="#cita">
      <i class="fa-solid fa-calendar-plus"></i>
      Agendar Cita
    </a>
    <a class="boton-principal" id="btn-mis-citas" href="#mis-citas">
      <i class="fa-solid fa-calendar-check"></i>
      Mis citas
    </a>
    <a class="boton-principal" id="btn-informe" href="#informe">
      <i class="fa-solid fa-file-medical"></i>
      Informe Médico
    </a>
    <a class="boton-principal" id="btn-historial" href="#historial">
      <i class="fa-solid fa-notes-medical"></i>
      Historial Médico
    </a>
  </div>

  <!-- Secciones ocultas hasta hacer clic en los botones -->
  <section class="seccion" id="cita">
    <h2>Crear Cita</h2>
    <div id="mensaje-cita" style="display:none;"></div>
    <form id="form-cita">
      <!-- Página 1 -->
      <div class="form-page" id="form-page-1" style="display:block;">
        <label>Modalidad:
          <select name="modalidad" id="modalidad" required>
            <option value="">Seleccione</option>
            <option value="presencial">Presencial</option>
            <option value="online">Online</option>
          </select>
        </label><br>
        <label>Fecha:
          <input type="date" name="fecha" id="fecha" required>
        </label><br>
        <label>Hora:
          <select name="hora" id="hora" required>
            <option value="">Seleccione</option>
            <!-- Opciones se llenan dinámicamente -->
          </select>
        </label><br>
        <label>Servicio:
          <select name="servicio" id="servicio" required>
            <option value="">Seleccione</option>
            <option value="psicoterapia_infantil">Psicoterapia Infantil</option>
            <option value="psicoterapia_adolescentes">Psicoterapia para Adolescentes</option>
            <option value="psicoterapia_individual">Psicoterapia Individual</option>
            <option value="psicoterapia_parejas">Psicoterapia para Parejas</option>
          </select>
        </label><br>
        <label>Método de pago:
          <select name="pago" id="pago" required>
            <option value="">Seleccione</option>
            <!-- Opciones se llenan dinámicamente -->
          </select>
        </label><br>
        <div class="form-nav">
          <button type="button" class="btn-modal" id="btn-continuar">Continuar</button>
        </div>
        <div class="form-pages-indicator">1 / 4</div>
      </div>
      <!-- Página 2: Datos de filiación -->
      <div class="form-page" id="form-page-2" style="display:none;">
        <h3>Datos de filiación</h3>
        <label>Nombre:<input type="text" name="nombre" required></label>
        <label>Apellido:<input type="text" name="apellido" required></label>
        <label>Edad:<input type="number" name="edad" min="0" required></label>
        <label>Fecha de nacimiento:<input type="date" name="fecha_nacimiento" required></label>
        <label>Lugar de nacimiento:<input type="text" name="lugar_nacimiento" required></label>
        <label>Instrucción:<input type="text" name="instruccion" required></label>
        <label>Ocupación:<input type="text" name="ocupacion" required></label>
        <label>Estado civil:<input type="text" name="estado_civil" required></label>
        <label>Religión:<input type="text" name="religion" required></label>
        <label>Nombre del cónyuge (opcional):<input type="text" name="nombre_conyuge"></label>
        <label>Teléfono del cónyuge (opcional):<input type="text" name="telefono_conyuge"></label>
        <label>Hijos:<input type="text" name="hijos"></label>
        <label>Edades de los hijos:<input type="text" name="edades_hijos"></label>
        <label>Centro de estudio y/o trabajo:<input type="text" name="centro_estudio_trabajo"></label>
        <label>Grado:<input type="text" name="grado"></label>
        <label>Lugar de residencia:<input type="text" name="lugar_residencia" required></label>
        <label>Tiempo de residencia:<input type="text" name="tiempo_residencia"></label>
        <label>Procedencia:<input type="text" name="procedencia"></label>
        <label>Teléfono:<input type="text" name="telefono" required></label>
        <label>Correo:<input type="email" name="correo" required></label>
        <div style="display:flex;gap:12px;justify-content:center;margin-top:18px;">
          <button type="button" class="btn-modal" id="btn-atras">Atrás</button>
          <button type="button" class="btn-modal" id="btn-siguiente-2">Siguiente</button>
        </div>
        <div class="form-pages-indicator">2 / 4</div>
      </div>
      <!-- Página 3: Problema actual -->
      <div class="form-page" id="form-page-3" style="display:none;">
        <h3>Problema actual</h3>
        <label>Motivo de la consulta:<input type="text" name="motivo_consulta" required></label>
        <label>Síntoma:<input type="text" name="sintoma" required></label>
        <h4 style="margin-top:18px;">Episodios previos</h4>
        <label>Tiempo del problema:<input type="text" name="tiempo_problema"></label>
        <label>¿Qué le sucedió ese día?:<input type="text" name="que_sucedio"></label>
        <label>¿Qué pasó el día anterior?:<input type="text" name="dia_anterior"></label>
        <label>¿Qué hizo?:<input type="text" name="que_hizo"></label>
        <label>¿Cómo se calmó?:<input type="text" name="como_se_calmo"></label>
        <label>¿Habló con alguien del problema?:<input type="text" name="hablo_con_alguien"></label>
        <label>Factores desencadenantes del problema actual:<input type="text" name="factores_desencadenantes"></label>
        <div style="display:flex;gap:12px;justify-content:center;margin-top:18px;">
          <button type="button" class="btn-modal" id="btn-atras-3">Atrás</button>
          <button type="button" class="btn-modal" id="btn-siguiente-3">Siguiente</button>
        </div>
        <div class="form-pages-indicator">3 / 4</div>
      </div>
      <!-- Página 4: Últimos tratamientos y auto descripción -->
      <div class="form-page" id="form-page-4" style="display:none;">
        <h3>Últimos tratamientos recibidos (físicos y psicológicos)</h3>
        <table id="tabla-tratamientos" style="width:100%;margin-bottom:12px;">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Tipo</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="date" name="tratamiento_fecha[]"></td>
              <td><input type="text" name="tratamiento_tipo[]"></td>
              <td><button type="button" class="btn-modal btn-agregar-fila">+</button></td>
            </tr>
          </tbody>
        </table>
        <h4>Auto descripción de la personalidad</h4>
        <label>¿Cómo podría describir su personalidad?
          <textarea name="auto_descripcion" rows="2" required></textarea>
        </label>
        <label>¿Cuál es su filosofía de vida?
          <textarea name="filosofia_vida" rows="2" required></textarea>
        </label>
        <div style="display:flex;gap:12px;justify-content:center;margin-top:18px;">
          <button type="button" class="btn-modal" id="btn-atras-4">Atrás</button>
          <button type="submit" class="btn-modal">Agendar</button>
        </div>
        <div class="form-pages-indicator">4 / 4</div>
      </div>
    </form>
  </section>


  <section class="seccion" id="informe" style="display:none;">
    <h2>Informe Médico</h2>
    <div id="historial-informes">
      <!-- Aquí se llenará la tabla de informes con JS -->
    </div>
  </section>

  <!-- Nueva sección para editar perfil -->
  <section class="seccion" id="editar-perfil-seccion" style="display:none;">
    <h2>Editar Perfil</h2>
    <div style="display:flex;flex-direction:column;gap:18px;align-items:center;max-width:350px;margin:auto;">
      <div style="width:100%;display:flex;flex-direction:column;align-items:center;">
        <button class="btn-modal" id="btn-desplegar-usuario" type="button">Cambiar usuario o correo</button>
        <div id="desplegable-usuario" class="desplegable-perfil" style="display:none;width:100%;">
          <label for="tipo-cambio-usuario" style="margin-bottom:8px;display:block;">¿Qué desea cambiar?</label>
          <select id="tipo-cambio-usuario" style="width:100%;padding:8px;margin-bottom:10px;">
            <option value="">Seleccione</option>
            <option value="usuario">Usuario</option>
            <option value="correo">Correo</option>
          </select>
          <input type="text" id="nuevo-usuario" placeholder="Ingrese nuevo usuario" autocomplete="off" style="width:100%;padding:8px;display:none;">
          <input type="email" id="nuevo-correo" placeholder="Ingrese nuevo correo" autocomplete="off" style="width:100%;padding:8px;display:none;">
        </div>
      </div>
      <div style="width:100%;display:flex;flex-direction:column;align-items:center;">
        <button class="btn-modal" id="btn-desplegar-contrasena" type="button">Cambiar contraseña</button>
        <div id="desplegable-contrasena" class="desplegable-perfil" style="display:none;width:100%;">
          <input type="password" id="nueva-contrasena" placeholder="Ingrese su nueva contraseña" autocomplete="new-password" style="width:100%;padding:8px;margin-bottom:8px;">
          <input type="password" id="confirmar-contrasena" placeholder="Confirmar contraseña" autocomplete="new-password" style="width:100%;padding:8px;">
          <div id="mensaje-contrasena" style="color:#e74c3c;font-size:0.95em;margin-top:4px;display:none;"></div>
        </div>
      </div>
      <div style="width:100%;display:flex;flex-direction:column;align-items:center;">
        <button class="btn-modal" id="btn-desplegar-seguridad" type="button">Cambiar pregunta de seguridad</button>
        <div id="desplegable-seguridad" class="desplegable-perfil" style="display:none;width:100%;">
          <label>Pregunta de seguridad:
            <select id="pregunta-seguridad" style="width:100%;padding:8px;">
              <option value="">Seleccione una pregunta</option>
              <option value="color">¿Cuál es tu color favorito?</option>
              <option value="animal">¿Cuál es tu animal favorito?</option>
            </select>
          </label>
          <input type="text" id="respuesta-seguridad" placeholder="Respuesta" autocomplete="off" style="width:100%;padding:8px;margin-top:8px;">
        </div>
      </div>
    </div>
    <div style="display:flex;gap:12px;justify-content:center;margin-top:18px;">
      <button type="button" class="btn-modal" id="guardar-cambios-perfil">Guardar cambios</button>
      <button type="button" class="btn-modal btn-cancelar" id="cancelar-editar-perfil">Cancelar</button>
    </div>
  </section>

  <!-- Nueva sección para mis citas -->
  <section class="seccion" id="mis-citas-seccion" style="display:none;">
    <h2>Mis citas</h2>
    <div class="tabla-citas-wrapper">
      <table class="tabla-citas">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Paciente</th>
            <th>Categoría</th>
            <th>Modalidad</th>
            <th>Método de pago</th>
            <th>Estado</th>
            <th>Nota</th>
          </tr>
        </thead>
        <tbody id="tabla-mis-citas">
          <!-- Las filas se llenan con JS -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Nueva sección para historial médico -->
  <section class="seccion" id="historial" style="display:none;">
    <h2>Historial Médico</h2>
    <div id="mensaje-historial" style="display:none;"></div>
    <form id="form-historial">
      <label>Fecha de la última consulta:
        <input type="date" name="fecha_consulta" id="fecha_consulta" required>
      </label><br>
      <label>Diagnóstico:
        <textarea name="diagnostico" id="diagnostico" rows="2" required></textarea>
      </label><br>
      <label>Tratamiento:
        <textarea name="tratamiento" id="tratamiento" rows="2" required></textarea>
      </label><br>
      <label>Antecedentes:
        <textarea name="antecedentes" id="antecedentes" rows="2"></textarea>
      </label><br>
      <div style="display:flex;gap:12px;justify-content:center;margin-top:18px;">
        <button type="submit" class="btn-modal">Guardar historial</button>
      </div>
    </form>
  </section>

  <script src="perfil.js"></script>
</body>
</html>
